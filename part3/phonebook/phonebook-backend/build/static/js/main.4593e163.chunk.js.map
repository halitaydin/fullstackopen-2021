{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleFilterChange","placeholder","onChange","PersonForm","handleNameChange","handleNumberChange","addName","newName","newNumber","onSubmit","value","type","Persons","results","deletePerson","map","person","name","number","onClick","window","confirm","id","baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","delete","update","newNum","put","Notification","successMessage","errorMessage","className","App","useState","persons","setPersons","setNewName","setNewNumber","filter","setFilteredName","setSuccessMessage","setErrorMessage","useEffect","personService","initialPersons","toLowerCase","includes","event","target","preventDefault","nameObject","indexSameNamePerson","indexOf","find","n","changedNum","setTimeout","catch","error","alert","returnedName","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4593e163.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ handleFilterChange }) => (\n  <div>\n    filter shown with:{\" \"}\n    <input placeholder={\"search\"} onChange={handleFilterChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  handleNameChange,\n  handleNumberChange,\n  addName,\n  newName,\n  newNumber,\n}) => (\n  <form onSubmit={addName}>\n    <div>\n      name:{\" \"}\n      <input\n        placeholder={\"a new name...\"}\n        value={newName}\n        onChange={handleNameChange}\n      />\n    </div>\n    <div>\n      number:{\" \"}\n      <input\n        placeholder={\"a new number\"}\n        value={newNumber}\n        onChange={handleNumberChange}\n      />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ results, deletePerson }) => {\n  return results.map((person) => (\n    <p key={person.id}>\n      {person.name}\n      {\":\"} {person.number}{\" \"}\n      {\n        <button\n          onClick={() => {\n            if (window.confirm(`Delete ${person.name}?`)) {\n              deletePerson(person.id);\n            }\n          }}\n        >\n          delete\n        </button>\n      }\n    </p>\n  ));\n};\n\nexport default Persons;\n","import axios from \"axios\";\n\nconst baseUrl = 'api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newNum) => {\n  const request = axios.put(`${baseUrl}/${id}`, newNum);\n  return request.then((response) => response.data);\n};\n\nconst exportedObject = { getAll, create, deletePerson, update };\n\nexport default exportedObject;\n","import React from \"react\";\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (successMessage !== null) {\n    return (\n      <div>\n        <div className=\"success\">{successMessage}</div>\n      </div>\n    );\n  } else if (errorMessage !== null) {\n    return (\n      <div>\n        <div className=\"error\">{errorMessage}</div>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilteredName] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addName = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    if (persons.map((person) => person.name).includes(newName)) {\n      const indexSameNamePerson = persons\n        .map((person) => person.name)\n        .indexOf(newName);\n      const id = persons[indexSameNamePerson].id;\n      const person = persons.find((n) => n.id === id);\n      const changedNum = { ...person, number: newNumber };\n      if (\n        window.confirm(\n          `${person.name} is already added the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(id, changedNum)\n          .then(() => {\n            personService.getAll().then((initialPersons) => {\n              setPersons(initialPersons);\n              setNewName(\"\");\n              setNewNumber(\"\");\n              setSuccessMessage(`${person.name} number has changed`);\n              setTimeout(() => {\n                setSuccessMessage(null);\n              }, 3000);\n            });\n          })\n          .catch((error) => {\n            setErrorMessage(\n              `${error.response.data.error}`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          });\n      }\n    } else if (persons.map((person) => person.number).includes(newNumber)) {\n      alert(`${newNumber} is already added to phonebook`);\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } else {\n      personService.create(nameObject).then((returnedName) => {\n        setPersons(persons.concat(returnedName));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setSuccessMessage(`Added ${nameObject.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 3000);\n      }).catch(error => {\n        // this is the way to access the error message\n        // console.log(error.response.data)\n        setErrorMessage(\n          `${error.response.data.error}`\n        );\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      })\n    }\n  };\n\n  const deleteHandler = (id) =>\n    personService\n      .deletePerson(id)\n      .then(() => setPersons(persons.filter((person) => id !== person.id)));\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  const handleFilterChange = (event) => setFilteredName(event.target.value);\n\n  const results = persons.filter((person) =>\n    person.name.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter handleFilterChange={handleFilterChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addName={addName}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons results={results} deletePerson={deleteHandler} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}